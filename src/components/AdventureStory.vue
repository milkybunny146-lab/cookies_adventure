<script setup>
import { ref } from 'vue'

const currentChapter = ref(0)

const chapters = ref([
  {
    id: 1,
    title: 'ç¬¬ä¸€ç« ï¼šé¤…ä¹¾ç‹åœ‹çš„èª•ç”Ÿ',
    content: `å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œåœ¨ä¸€å€‹å……æ»¿é­”æ³•çš„ä¸–ç•Œè£¡ï¼Œå­˜åœ¨è‘—ä¸€å€‹ç”±é¤…ä¹¾çµ„æˆçš„ç‹åœ‹ã€‚é€™å€‹ç‹åœ‹çš„å±…æ°‘éƒ½æ˜¯å„ç¨®å„æ¨£çš„é¤…ä¹¾ï¼Œä»–å€‘æ“æœ‰ä¸åŒçš„èƒ½åŠ›å’Œç‰¹è³ªã€‚

æœ‰ä¸€å¤©ï¼Œé»‘æš—å‹¢åŠ›çªç„¶é™è‡¨ï¼Œå¨è„…è‘—æ•´å€‹é¤…ä¹¾ç‹åœ‹çš„å’Œå¹³ã€‚åœ‹ç‹å¬é›†äº†æ‰€æœ‰å‹‡æ•¢çš„é¤…ä¹¾å‹‡è€…ï¼Œæº–å‚™å±•é–‹ä¸€å ´å²è©©èˆ¬çš„å†’éšªã€‚

ä½ ï¼Œä½œç‚ºä¸€ä½æ–°æ™‰çš„é¤…ä¹¾å‹‡è€…ï¼Œè¢«é¸ä¸­åƒèˆ‡é€™å ´å‰å¤§çš„å†’éšªã€‚ä½ çš„ä»»å‹™æ˜¯æ”¶é›†å¼·å¤§çš„é¤…ä¹¾å¤¥ä¼´ï¼Œæ¢ç´¢æœªçŸ¥çš„é ˜åŸŸï¼Œæ“Šæ•—é‚ªæƒ¡å‹¢åŠ›ï¼Œæ‹¯æ•‘é¤…ä¹¾ç‹åœ‹ï¼`,
    image: 'ğŸ°',
    unlocked: true
  },
  {
    id: 2,
    title: 'ç¬¬äºŒç« ï¼šåˆé‡å¤¥ä¼´',
    content: `åœ¨å†’éšªçš„é–‹å§‹ï¼Œä½ é‡åˆ°äº†ç¬¬ä¸€ä½å¤¥ä¼´â€”â€”å‹‡æ•¢é¤…ä¹¾ã€‚ä»–æ˜¯ä¸€ä½å……æ»¿å‹‡æ°£çš„æˆ°å£«ï¼Œç¸½æ˜¯è¡åœ¨æœ€å‰ç·šä¿è­·å¤¥ä¼´ã€‚

å‹‡æ•¢é¤…ä¹¾å‘Šè¨´ä½ ï¼Œè¦æ‹¯æ•‘ç‹åœ‹ï¼Œéœ€è¦æ”¶é›†æ›´å¤šå¼·å¤§çš„é¤…ä¹¾å‹‡è€…ã€‚æ¯å€‹é¤…ä¹¾éƒ½æœ‰è‡ªå·±ç¨ç‰¹çš„èƒ½åŠ›å’Œå…ƒç´ å±¬æ€§ï¼Œåªæœ‰åœ˜çµä¸€è‡´ï¼Œæ‰èƒ½æˆ°å‹å¼·å¤§çš„æ•µäººã€‚

ä½ å€‘ä¸€èµ·è¸ä¸Šäº†å°‹æ‰¾å…¶ä»–é¤…ä¹¾å‹‡è€…çš„æ—…ç¨‹ï¼Œå‰å¾€å„å€‹ç¥ç§˜çš„å€åŸŸï¼Œæ¢ç´¢æœªçŸ¥çš„ç§˜å¯†ã€‚`,
    image: 'âš”ï¸',
    unlocked: true
  },
  {
    id: 3,
    title: 'ç¬¬ä¸‰ç« ï¼šé»‘æš—æ£®æ—çš„è©¦ç…‰',
    content: `ç¶“éé•·é€”è·‹æ¶‰ï¼Œä½ å€‘ä¾†åˆ°äº†é»‘æš—æ£®æ—ã€‚é€™è£¡å……æ»¿äº†å±éšªçš„æ€ªç‰©å’Œé™·é˜±ï¼Œä½†åŒæ™‚ä¹Ÿéš±è—è‘—çè²´çš„å¯¶è—å’Œå¼·å¤§çš„é¤…ä¹¾ã€‚

åœ¨æ£®æ—æ·±è™•ï¼Œä½ å€‘é‡åˆ°äº†æš—å½±é¤…ä¹¾ã€‚ä»–æ˜¯ä¸€ä½ç¥ç§˜çš„åˆºå®¢ï¼Œæ“…é•·éš±åŒ¿å’Œæš—æ®ºã€‚é›–ç„¶ä¸€é–‹å§‹ä»–å°ä½ å€‘ä¿æŒè­¦æƒ•ï¼Œä½†åœ¨å…±åŒé¢å°æ£®æ—ä¸­çš„å±éšªå¾Œï¼Œä»–æ±ºå®šåŠ å…¥ä½ å€‘çš„éšŠä¼ã€‚

é»‘æš—æ£®æ—çš„è©¦ç…‰è®“ä½ å€‘çš„éšŠä¼æ›´åŠ å¼·å¤§ï¼Œä¹Ÿè®“ä½ å€‘æ„è­˜åˆ°ï¼ŒçœŸæ­£çš„å†’éšªæ‰å‰›å‰›é–‹å§‹ã€‚`,
    image: 'ğŸŒ²',
    unlocked: true
  },
  {
    id: 4,
    title: 'ç¬¬å››ç« ï¼šå†°éœœæ´ç©´çš„æŒ‘æˆ°',
    content: `ç‚ºäº†å°‹æ‰¾å‚³èªªä¸­çš„å†°ç³»é¤…ä¹¾ï¼Œä½ å€‘ä¾†åˆ°äº†æ¥µå¯’çš„å†°éœœæ´ç©´ã€‚é€™è£¡çš„æº«åº¦æ¥µä½ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è¦å°å¿ƒè¬¹æ…ã€‚

åœ¨æ´ç©´æ·±è™•ï¼Œä½ å€‘ç™¼ç¾äº†å®ˆè­·é¤…ä¹¾ã€‚ä»–æ˜¯ä¸€ä½å …æ¯…çš„å¦å…‹ï¼Œæ“æœ‰å¼·å¤§çš„é˜²ç¦¦èƒ½åŠ›ã€‚ä»–å‘Šè¨´ä½ å€‘ï¼Œé‚ªæƒ¡å‹¢åŠ›æ­£åœ¨é›†çµï¼Œæº–å‚™å°é¤…ä¹¾ç‹åœ‹ç™¼å‹•æœ€å¾Œçš„æ”»æ“Šã€‚

ä½ å€‘å¿…é ˆåŠ å¿«è…³æ­¥ï¼Œæ”¶é›†æ›´å¤šå¼·å¤§çš„é¤…ä¹¾ï¼Œæº–å‚™è¿æ¥æœ€çµ‚çš„æ±ºæˆ°ã€‚`,
    image: 'â„ï¸',
    unlocked: true
  },
  {
    id: 5,
    title: 'ç¬¬äº”ç« ï¼šé¾æ—éºè·¡çš„ç§˜å¯†',
    content: `æ ¹æ“šå¤è€çš„å‚³èªªï¼Œä½ å€‘ä¾†åˆ°äº†é¾æ—éºè·¡ã€‚é€™è£¡æ˜¯é å¤é¾æ—çš„æ£²æ¯åœ°ï¼Œéš±è—è‘—å¼·å¤§çš„åŠ›é‡å’Œç§˜å¯†ã€‚

åœ¨éºè·¡æ·±è™•ï¼Œä½ å€‘é‡åˆ°äº†å‚³èªªä¸­çš„é¾ç„°é¤…ä¹¾ã€‚ä»–æ“æœ‰é å¤é¾æ—çš„è¡€è„ˆï¼Œæˆ°åŠ›ç„¡é›™ã€‚ä»–å‘Šè¨´ä½ å€‘ï¼Œè¦æ“Šæ•—æœ€çµ‚çš„æ•µäººï¼Œéœ€è¦é›†åˆæ‰€æœ‰å‚³èªªç´šé¤…ä¹¾çš„åŠ›é‡ã€‚

é¾æ—éºè·¡çš„æ¢ç´¢è®“ä½ å€‘ç²å¾—äº†å¼·å¤§çš„è£å‚™å’Œé“å…·ï¼Œä¹Ÿè®“ä½ å€‘å°å³å°‡åˆ°ä¾†çš„æ±ºæˆ°å……æ»¿ä¿¡å¿ƒã€‚`,
    image: 'ğŸ‰',
    unlocked: true
  },
  {
    id: 6,
    title: 'ç¬¬å…­ç« ï¼šæ·±æ·µåœ°ç„çš„æœ€çµ‚æ±ºæˆ°',
    content: `æœ€çµ‚çš„æ™‚åˆ»ä¾†è‡¨äº†ã€‚ä½ å€‘ä¾†åˆ°äº†æ·±æ·µåœ°ç„ï¼Œé€™è£¡æ˜¯é‚ªæƒ¡å‹¢åŠ›çš„æœ€å¾Œæ“šé»ã€‚é»‘æš—é ˜ä¸»æ­£åœ¨é€™è£¡ç­‰å¾…è‘—ä½ å€‘ã€‚

é€™æ˜¯ä¸€å ´å²è©©èˆ¬çš„æˆ°é¬¥ã€‚ä½ å€‘é›†çµäº†æ‰€æœ‰æ”¶é›†åˆ°çš„é¤…ä¹¾å‹‡è€…ï¼Œä½¿ç”¨å„ç¨®å¼·å¤§çš„æŠ€èƒ½å’Œç­–ç•¥ï¼Œèˆ‡é»‘æš—é ˜ä¸»å±•é–‹æ¿€çƒˆçš„å°æ±ºã€‚

ç¶“éè‰±è‹¦çš„æˆ°é¬¥ï¼Œä½ å€‘çµ‚æ–¼æ“Šæ•—äº†é»‘æš—é ˜ä¸»ï¼Œæ‹¯æ•‘äº†é¤…ä¹¾ç‹åœ‹ã€‚ä½†é€™åªæ˜¯æ–°çš„é–‹å§‹ï¼Œé‚„æœ‰æ›´å¤šçš„å†’éšªç­‰å¾…è‘—ä½ å€‘...`,
    image: 'ğŸ’€',
    unlocked: false
  }
])

const selectChapter = (index) => {
  if (chapters.value[index].unlocked) {
    currentChapter.value = index
  }
}

const nextChapter = () => {
  if (currentChapter.value < chapters.value.length - 1) {
    currentChapter.value++
  }
}

const prevChapter = () => {
  if (currentChapter.value > 0) {
    currentChapter.value--
  }
}
</script>

<template>
  <main class="main-content">
    <h1 class="page-title">ğŸ“– å†’éšªæ•…äº‹</h1>

    <!-- ç« ç¯€åˆ—è¡¨ -->
    <div class="chapters-sidebar">
      <h3 class="sidebar-title">ç« ç¯€åˆ—è¡¨</h3>
      <div class="chapter-list">
        <div
          v-for="(chapter, index) in chapters"
          :key="chapter.id"
          class="chapter-item"
          :class="{ 
            active: currentChapter === index,
            locked: !chapter.unlocked
          }"
          @click="selectChapter(index)"
        >
          <div class="chapter-number">{{ index + 1 }}</div>
          <div class="chapter-info">
            <div class="chapter-title-small">{{ chapter.title }}</div>
            <div v-if="!chapter.unlocked" class="locked-badge">ğŸ”’ æœªè§£é–</div>
          </div>
        </div>
      </div>
    </div>

    <!-- æ•…äº‹å…§å®¹ -->
    <div class="story-content">
      <div class="story-header">
        <div class="chapter-icon">{{ chapters[currentChapter].image }}</div>
        <div>
          <h2 class="story-title">{{ chapters[currentChapter].title }}</h2>
          <div class="chapter-meta">
            <span>ç¬¬ {{ currentChapter + 1 }} ç«  / å…± {{ chapters.length }} ç« </span>
          </div>
        </div>
      </div>

      <div class="story-body">
        <div class="story-text">
          <p v-for="(paragraph, index) in chapters[currentChapter].content.split('\n\n')" :key="index">
            {{ paragraph }}
          </p>
        </div>
      </div>

      <!-- å°èˆªæŒ‰éˆ• -->
      <div class="story-navigation">
        <button 
          class="nav-btn prev-btn"
          :disabled="currentChapter === 0"
          @click="prevChapter"
        >
          â† ä¸Šä¸€ç« 
        </button>
        <div class="chapter-indicator">
          {{ currentChapter + 1 }} / {{ chapters.length }}
        </div>
        <button 
          class="nav-btn next-btn"
          :disabled="currentChapter === chapters.length - 1 || !chapters[currentChapter + 1].unlocked"
          @click="nextChapter"
        >
          ä¸‹ä¸€ç«  â†’
        </button>
      </div>
    </div>
  </main>
</template>

<style scoped>
.main-content {
  flex: 1;
  padding: 2rem;
  background-color: #f5f5f5;
  display: flex;
  gap: 2rem;
}

.page-title {
  position: absolute;
  top: 2rem;
  left: 2rem;
  font-size: 1.8rem;
  color: #2c3e50;
  margin: 0;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #667eea;
}

/* ç« ç¯€å´é‚Šæ¬„ */
.chapters-sidebar {
  width: 300px;
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  height: fit-content;
  position: sticky;
  top: 2rem;
  flex-shrink: 0;
}

.sidebar-title {
  font-size: 1.1rem;
  color: #2c3e50;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #ecf0f1;
}

.chapter-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.chapter-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.8rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
}

.chapter-item:hover {
  background: #f8f9fa;
}

.chapter-item.active {
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border-color: #667eea;
}

.chapter-item.locked {
  opacity: 0.6;
  cursor: not-allowed;
}

.chapter-number {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  flex-shrink: 0;
}

.chapter-item.locked .chapter-number {
  background: #95a5a6;
}

.chapter-info {
  flex: 1;
}

.chapter-title-small {
  font-size: 0.9rem;
  color: #2c3e50;
  font-weight: 500;
  margin-bottom: 0.2rem;
}

.locked-badge {
  font-size: 0.75rem;
  color: #7f8c8d;
}

/* æ•…äº‹å…§å®¹ */
.story-content {
  flex: 1;
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.story-header {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #ecf0f1;
}

.chapter-icon {
  font-size: 4rem;
  width: 100px;
  height: 100px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.story-title {
  font-size: 1.8rem;
  color: #2c3e50;
  margin: 0 0 0.5rem 0;
}

.chapter-meta {
  font-size: 0.9rem;
  color: #7f8c8d;
}

.story-body {
  margin-bottom: 2rem;
}

.story-text {
  line-height: 2;
  color: #2c3e50;
}

.story-text p {
  margin-bottom: 1.5rem;
  font-size: 1.05rem;
  text-align: justify;
}

/* å°èˆªæŒ‰éˆ• */
.story-navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 2rem;
  border-top: 2px solid #ecf0f1;
}

.nav-btn {
  padding: 0.8rem 1.5rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
}

.nav-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.nav-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.chapter-indicator {
  font-size: 0.9rem;
  color: #7f8c8d;
  font-weight: 500;
}

/* RWD */
@media (max-width: 1024px) {
  .main-content {
    flex-direction: column;
  }
  
  .chapters-sidebar {
    width: 100%;
    position: static;
  }
  
  .page-title {
    position: static;
    margin-bottom: 1.5rem;
  }
}

@media (max-width: 1024px) {
  .main-content {
    flex-direction: column;
    padding: 1rem;
  }
  
  .chapters-sidebar {
    width: 100%;
    position: static;
    margin-bottom: 1.5rem;
  }
  
  .page-title {
    position: static;
    margin-bottom: 1rem;
  }
}

@media (max-width: 768px) {
  .main-content {
    padding: 1rem;
  }

  .page-title {
    font-size: 1.5rem;
  }

  .chapters-sidebar {
    padding: 1rem;
  }

  .chapter-item {
    padding: 0.6rem;
  }

  .chapter-number {
    width: 35px;
    height: 35px;
    font-size: 0.9rem;
  }

  .chapter-title-small {
    font-size: 0.85rem;
  }

  .story-content {
    padding: 1.5rem;
  }

  .story-header {
    flex-direction: column;
    text-align: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .chapter-icon {
    width: 80px;
    height: 80px;
    font-size: 3rem;
  }

  .story-title {
    font-size: 1.5rem;
  }

  .story-text {
    font-size: 1rem;
    line-height: 1.8;
  }

  .story-text p {
    margin-bottom: 1rem;
  }
  
  .story-navigation {
    flex-direction: column;
    gap: 1rem;
    padding-top: 1.5rem;
  }
  
  .nav-btn {
    width: 100%;
    padding: 0.7rem;
  }
}

@media (max-width: 480px) {
  .main-content {
    padding: 0.8rem;
  }

  .page-title {
    font-size: 1.3rem;
  }

  .chapters-sidebar {
    padding: 0.8rem;
  }

  .chapter-item {
    padding: 0.5rem;
  }

  .chapter-number {
    width: 30px;
    height: 30px;
    font-size: 0.8rem;
  }

  .story-content {
    padding: 1rem;
  }

  .chapter-icon {
    width: 60px;
    height: 60px;
    font-size: 2.5rem;
  }

  .story-title {
    font-size: 1.3rem;
  }

  .story-text {
    font-size: 0.95rem;
  }

  .nav-btn {
    padding: 0.6rem;
    font-size: 0.9rem;
  }
}
</style>

